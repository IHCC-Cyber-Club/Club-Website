<script>
    // Helper function to turn "01" into "January" and "5" into "5th"
    function formatFullDate(dateString) {
      const months = [
        "January", "February", "March", "April", "May", "June",
        "July", "August", "September", "October", "November", "December"
      ];
      
      const parts = dateString.split('-');
      if (parts.length !== 3) return dateString;

      const year = parts[0];
      const month = months[parseInt(parts[1]) - 1];
      const day = parseInt(parts[2]);

      // Add the "st", "nd", "rd", or "th" suffix
      let suffix = "th";
      if (day % 10 === 1 && day !== 11) suffix = "st";
      else if (day % 10 === 2 && day !== 12) suffix = "nd";
      else if (day % 10 === 3 && day !== 13) suffix = "rd";

      return `${month} ${day}${suffix}, ${year}`;
    }

    async function loadMeetingNotes() {
      const container = document.getElementById('notes-grid'); 
      try {
          const response = await fetch('https://api.github.com/repos/IHCC-Cyber-Club/Club-Website/contents/notes');
          if (!response.ok) throw new Error('GitHub connection failed');
          
          const files = await response.json();
          files.sort((a, b) => b.name.localeCompare(a.name));

          container.innerHTML = ''; 

          for (const file of files) {
              if (file.name.endsWith('.html')) {
                  // Pulls the YYYY-MM-DD part from the filename
                  const rawDate = file.name.substring(0, 10); 
                  
                  // NEW: Formats to "Month DaySuffix, Year"
                  const displayDate = formatFullDate(rawDate);

                  const noteElement = `
                      <div class="card">
                          <h3>${displayDate}</h3>
                          <a class="view-btn" href="notes/${file.name}">View Notes</a>
                      </div>
                  `;
                  container.insertAdjacentHTML('beforeend', noteElement);
              }
          }

          if (container.innerHTML === '') {
              container.innerHTML = '<p style="grid-column: 1/-1; text-align: center;">No archives found.</p>';
          }
      } catch (error) {
          container.innerHTML = '<p style="grid-column: 1/-1; text-align: center;">Unable to connect to GitHub.</p>';
      }
    }
    document.addEventListener('DOMContentLoaded', loadMeetingNotes);
  </script>