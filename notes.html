<script>
    async function loadMeetingNotes() {
      const container = document.getElementById('notes-grid'); 
      
      try {
          // FIXED: Using 'contents/notes' to match your repository folder exactly
          const response = await fetch('https://api.github.com/repos/IHCC-Cyber-Club/Club-Website/contents/contents/notes', {
              headers: { 'Accept': 'application/vnd.github.v3+json' }
          });

          if (!response.ok) throw new Error('Failed to fetch from GitHub');

          const files = await response.json();

          // Sorts the files by date (YYYY-MM-DD) so the newest is at the top
          files.sort((a, b) => b.name.localeCompare(a.name));

          container.innerHTML = ''; 

          for (const file of files) {
              // Only process Markdown files and skip the 'testnote.md' if you want
              if (file.name.endsWith('.md') && file.name !== 'testnote.md') {
                  const datePart = file.name.substring(0, 10); 
                  const titlePart = file.name.replace('.md', '').substring(11).replace(/-/g, ' ');

                  const noteElement = `
                      <div class="card" style="min-height:auto; text-align: left; padding: 20px;">
                          <h3 style="font-size:18px; text-transform: capitalize; color: #00f2ff; font-family: 'Orbitron';">${titlePart || 'Meeting Notes'}</h3>
                          <p style="font-size: 12px; opacity: 0.7; margin: 5px 0 15px;">${datePart}</p>
                          <a class="btn secondary" href="${file.html_url}" target="_blank" style="display:inline-block; font-size:11px; padding: 8px 16px;">View Full Notes</a>
                      </div>
                  `;
                  container.insertAdjacentHTML('beforeend', noteElement);
              }
          }

          if (container.innerHTML === '') {
              container.innerHTML = '<p style="grid-column: 1/-1; text-align: center;">Archive is currently empty.</p>';
          }

      } catch (error) {
          console.error("GitHub API Error:", error);
          container.innerHTML = '<p style="grid-column: 1/-1; text-align: center; color: #ff4b4b;">Connection error. Please refresh.</p>';
      }
    }

    document.addEventListener('DOMContentLoaded', loadMeetingNotes);
</script>